<!DOCTYPE html>
<html>

<head>
  <title>Chat Page</title>
</head>
<link rel="stylesheet" href="styles.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<body onload="checkNickname()">
  <div class="navbar">
    <h1>Chat Everywhere</h1>
    <div class="welcome-message">
      <div id="nicknameDisplay"></div>
    </div>
  </div>
  <div class="row">
    <div class="col-2 left-navigation">
      <h2>Connected Users</h2>
      <ul id="userList"></ul>
      <button onclick="needlist()">Refresh</button>
    </div>
    <div class="col-4 right-body">
      <div class="head-chat">
        <h2>Group Chat Room</h2>
      </div>
      <div class="body-chat">
        <ul id="messages"></ul>
        <form id="chatForm">
          <input type="text" id="messageInput" autocomplete="off" />
          <button type="submit">Send</button>
        </form>
      </div>
    </div>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
  integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
  integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="chat1.js"></script>
<script src="group.js"></script>
<script src="incoming.js"></script>
<script>
  function messageByYou(mess) {
    var li = document.createElement("li");
    li.classList.add("sent-by-you");

    var header = document.createElement("div");
    header.classList.add("message-header");

    var senderName = document.createElement("span");
    senderName.classList.add("sender-name");
    senderName.textContent = yourname;

    var time = document.createElement("span");
    time.textContent = getTime();

    header.appendChild(senderName);
    header.appendChild(time);

    var content = document.createElement("p");
    content.textContent = mess;

    li.appendChild(header);
    li.appendChild(content);

    li.style.backgroundColor = getRandomColor();
    li.style.color = getFontColor(li.style.backgroundColor);

    document.getElementById("messages").appendChild(li);
  }

  function messageByOtherUser(name, mess) {
    var li = document.createElement("li");
    li.classList.add("sent-by-other");

    var header = document.createElement("div");
    header.classList.add("message-header");

    var senderName = document.createElement("span");
    senderName.classList.add("sender-name");
    senderName.textContent = name;

    var time = document.createElement("span");
    time.textContent = getTime();

    header.appendChild(time);
    header.appendChild(senderName);

    var content = document.createElement("p");
    content.textContent = mess;

    li.appendChild(header);
    li.appendChild(content);

    li.style.backgroundColor = getRandomColor();
    li.style.color = getFontColor(li.style.backgroundColor);

    document.getElementById("messages").appendChild(li);
  }

  function Update(message) {
    var li = document.createElement("li");
    li.classList.add("update");

    var content = document.createElement("p");
    content.textContent = message;
    li.appendChild(content);
    document.getElementById("messages").appendChild(li);
  }

  function getRandomColor() {
    var letters = "0123456789ABCDEF";
    var color = "#";
    for (var i = 0; i < 6; i++) {
      color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
  }

  function getFontColor(backgroundColor) {
    // Parse the background color values
    var r = parseInt(backgroundColor.substr(1, 2), 16);
    var g = parseInt(backgroundColor.substr(3, 2), 16);
    var b = parseInt(backgroundColor.substr(5, 2), 16);
    var luminance = (r * 0.299 + g * 0.587 + b * 0.114) / 255;
    return luminance > 0.5 ? "#000" : "#fff";
  }
  function getTime() {
    var now = new Date();
    var hours = now.getHours().toString().padStart(2, "0");
    var minutes = now.getMinutes().toString().padStart(2, "0");
    return hours + ":" + minutes;
  }
</script>

</html>